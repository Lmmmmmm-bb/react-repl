<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Preview</title>
    <style>
      @tailwind base;
      @tailwind components;
      @tailwind utilities;

      .dark {
        color-scheme: dark;
      }
    </style>
  </head>

  <body class="h-full">
    <div id="root" class="h-full"></div>
  </body>

  <script type="module">
    const sandboxRoot = document.documentElement;
    const sandboxParentRoot = window.parent.document.documentElement;

    const strategy = {
      THEME_CHANGE: (payload) => sandboxRoot.classList.toggle('dark', payload.data === 'dark')
    };

    sandboxRoot.classList.toggle('dark', sandboxParentRoot.className.includes('dark'));

    window.addEventListener('message', ({ data }) => {
      const payload = typeof data === 'string' ? JSON.parse(data) : data;
      strategy[payload.type] && strategy[payload.type](payload);
    })
  </script>
</html>
